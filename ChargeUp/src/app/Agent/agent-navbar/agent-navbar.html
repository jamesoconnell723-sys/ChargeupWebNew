<!-- <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand ms-4" routerLink="/agent/user-management">Chargeup</a>

  <div class="collapse navbar-collapse">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item ms-2">
        <a class="nav-link" routerLink="/agent/user-management" routerLinkActive="active">User Management</a>
      </li>
      <li class="nav-item ms-2">
        <a class="nav-link" routerLink="/agent/recharge-records" routerLinkActive="active">Recharge Records</a>
      </li>
      <li class="nav-item ms-2">
        <a class="nav-link" routerLink="/agent/redeem-records" routerLinkActive="active">Redeem Records</a>
      </li>
      <li class="nav-item ms-2">
        <a class="nav-link" routerLink="/agent/summary" routerLinkActive="active">Summary</a>
      </li>
    </ul>

    <ul class="navbar-nav ms-auto">
      <li class="nav-item dropdown">
        <button class="btn btn-profile" type="button" id="profileMenu" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-user-circle fa-lg text-white"></i>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
          <li><a class="dropdown-item" routerLink="/agent/recharge-limit">Recharge Limit</a></li>
          <li><a class="dropdown-item" routerLink="/agent/redeem">Redeem</a></li>
          <li><a class="dropdown-item" routerLink="/change-password">Change Password</a></li>
          <li>
            <hr class="dropdown-divider">
          </li>
          <li><a class="dropdown-item" (click)="logout()">Logout</a></li>
        </ul>
      </li>
    </ul>
  </div>
</nav>
<div class="container mt-3">
  <router-outlet></router-outlet>
</div> -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
  <!-- Brand -->
  <a class="navbar-brand fw-bold text-white" routerLink="/agent/user-management">Chargeup</a>

  <!-- Nav links -->
  <div class="collapse navbar-collapse">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item ms-2">
        <a class="nav-link" routerLink="/agent/user-management" routerLinkActive="active">User Management</a>
      </li>
      <li class="nav-item ms-2">
        <a class="nav-link" routerLink="/agent/recharge-records" routerLinkActive="active">Recharge Records</a>
      </li>
      <li class="nav-item ms-2">
        <a class="nav-link" routerLink="/agent/redeem-records" routerLinkActive="active">Redeem Records</a>
      </li>
      <li class="nav-item ms-2">
        <a class="nav-link" routerLink="/agent/summary" routerLinkActive="active">Summary</a>
      </li>
    </ul>

    <!-- Spacer -->
    <div class="flex-grow-1"></div>

    <!-- Balance + Refresh -->
    <div class="d-flex align-items-center me-3 text-warning">
      <i class="fas fa-wallet me-1"></i>
      <span>Balance: {{ balance }}</span>
      <i class="fas fa-sync-alt ms-2 refresh-icon" (click)="refreshBalance()"></i>
    </div>

    <!-- Profile Dropdown -->
    <ul class="navbar-nav">
      <li class="nav-item dropdown">
        <button class="btn btn-dark dropdown-toggle d-flex align-items-center" id="profileMenu"
          data-bs-toggle="dropdown" aria-expanded="false">
          <i class="fas fa-user-circle fa-lg me-1 text-white"></i>
          <span class="text-white fw-semibold">{{ username }}</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li>
            <a class="dropdown-item d-flex align-items-center" (click)="openChangePassword()">
              <i class="fas fa-key me-2 text-secondary"></i> Change Password
            </a>
          </li>

          <li>
            <a class="dropdown-item d-flex align-items-center" (click)="openRechargeLimit()">
              <i class="fas fa-bolt me-2 text-warning"></i> Recharge Limit
            </a>
          </li>
          <!-- <li>
            <a class="dropdown-item" routerLink="/agent/master-accounting">
              <i class="fas fa-chart-line me-2 text-success"></i> Master Accounting
            </a>
          </li> -->
          <li>
            <hr class="dropdown-divider">
          </li>
          <li>
            <a class="dropdown-item text-danger" (click)="logout()">
              <i class="fas fa-sign-out-alt me-2"></i> Logout
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </div>
</nav>
<!-- ðŸ”’ Change Password Modal -->
<div class="modal fade" id="changePasswordModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-sm">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Change Password</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>

      <div class="modal-body">
        <form [formGroup]="changePasswordForm" (ngSubmit)="onChangePassword()">

          <!-- Current Password -->
          <div class="form-group position-relative mb-3">
            <input [type]="showPassword['current'] ? 'text' : 'password'" class="form-control"
              formControlName="currentPassword" placeholder="Current Password" />
            <button type="button" class="toggle-password" (click)="toggleVisibility('current')">
              <i [ngClass]="showPassword['current'] ? 'bi bi-eye' : 'bi bi-eye-slash'"></i>
            </button>
          </div>

          <!-- New Password -->
          <div class="form-group position-relative mb-3">
            <input [type]="showPassword['new'] ? 'text' : 'password'" class="form-control" formControlName="newPassword"
              placeholder="New Password" />
            <button type="button" class="toggle-password" (click)="toggleVisibility('new')">
              <i [ngClass]="showPassword['new'] ? 'bi bi-eye' : 'bi bi-eye-slash'"></i>
            </button>
          </div>

          <!-- Confirm Password -->
          <div class="form-group position-relative mb-3">
            <input [type]="showPassword['confirm'] ? 'text' : 'password'" class="form-control"
              formControlName="confirmPassword" placeholder="Confirm Password" />
            <button type="button" class="toggle-password" (click)="toggleVisibility('confirm')">
              <i [ngClass]="showPassword['confirm'] ? 'bi bi-eye' : 'bi bi-eye-slash'"></i>
            </button>
          </div>

          <!-- Buttons -->
          <div class="d-flex gap-2 mt-3">
            <button type="submit" class="btn btn-primary flex-fill">Save</button>
            <button type="button" class="btn btn-dark flex-fill" data-bs-dismiss="modal">Cancel</button>
          </div>
        </form>
      </div>

    </div>
  </div>
</div>


<!-- Recharge Limit Modal -->
<div class="modal fade" id="rechargeLimitModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Set Recharge Limits</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="rechargeLimitForm">

          <!-- Toggle Button -->
          <div class="form-check form-switch mb-3">
            <input class="form-check-input" type="checkbox" id="enableLimit" formControlName="enableLimit">
            <label class="form-check-label" for="enableLimit">Enable Recharge Limit Restriction</label>
          </div>

          <!-- Monthly and Daily Limit Inputs (always visible) -->
          <div class="mb-3">
            <input type="number" class="form-control" formControlName="monthlyLimit"
              placeholder="Monthly Recharge Limit">
          </div>
          <div class="mb-3">
            <input type="number" class="form-control" formControlName="dailyLimit" placeholder="Daily Recharge Limit">
          </div>

          <!-- Radio Buttons (visible only when toggle is ON) -->
          <div class="mb-3" *ngIf="rechargeLimitForm.get('enableLimit')?.value">
            <label class="form-label">Select Active Recharge Limit:</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" formControlName="activeLimit" value="daily"
                id="dailyLimitRadio">
              <label class="form-check-label" for="dailyLimitRadio">Set Daily Limit as Active</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="radio" formControlName="activeLimit" value="monthly"
                id="monthlyLimitRadio">
              <label class="form-check-label" for="monthlyLimitRadio">Set Monthly Limit as Active</label>
            </div>
          </div>

          <!-- Buttons -->
          <div class="d-flex gap-2 mt-4">
            <button type="button" class="btn btn-outline-dark flex-fill" data-bs-dismiss="modal">Cancel</button>
            <button type="button" class="btn btn-dark flex-fill" (click)="onApply()">Save</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Content area -->
<div class="container mt-4">
  <router-outlet></router-outlet>
</div>